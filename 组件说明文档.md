# ç»„ä»¶

## Avatarç»„ä»¶

#### å‚æ•°

```js
- src: "string"
- size: "48px"
- status: "online", "offline"
- statusIconSize: "8px"
```



## Iconç»„ä»¶

#### å…ˆä¿®çŸ¥è¯†ç‚¹

- `hygen init self` åˆå§‹åŒ–

- `hygen component new Icon` æ–°å»ºä¸€ä¸ªç»„ä»¶

- `FontAwesomeIcon` å¯ä»¥å…¼å®¹

#### å‚æ•°

```js
- icon:  svgç»„ä»¶ï¼ˆcreate-react-appæ”¯æŒä»svgå¯¼å‡ºsvgç»„ä»¶ï¼Œä¸éœ€è¦<imgåŠ è½½ï¼‰
- heightï¼š12/"12"
- widthï¼š12/"12"
- colorï¼š
- opacityï¼š
```

### å­ç»„ä»¶Icon.Social

`<Icon.Social />`

```react
Icon.Social = Social;
{
  icon: "elementType"
  bgColor: "string"
  href: "string"
}

// Icon/SocialIcon/index.js
import "styled-component/macro" ;  //åœ¨index.jsé‡Œä½¿ç”¨csså±æ€§

function SocialIcon({ icon, bgColor, href, ...rest }) {
  return (
    <Button
      bgColor={bgColor}
      size="30px" 
      onClick={() => href && window.open(href, "_blank")}
      css={`
        &:hover {
          transform: none;     //å–æ¶ˆæ‰æŒ‰é’®æ‚¬æµ®çš„scale
        }
      `}
      {...rest}
    >
      <FontAwesomeIcon icon={icon} style={{ fontSize: "16px" }} />
    </Button>
  );
}

// 
```



## Badgeç»„ä»¶ï¼ˆæ¶ˆæ¯çº¢ç‚¹ï¼‰

#### å…ˆä¿®çŸ¥è¯†ç‚¹

###### variantå˜ä½“

- æ¶ˆæ¯æ³¡åœ¨ä¾§è¾¹æ å’Œä¸»æ ç›®çš„å¤§å°ä¸ä¸€æ ·

###### React children 

- ç»„ä»¶çš„å®ä¾‹åŒ–ä½œä¸º**é—­åˆæ ‡ç­¾**ï¼Œé‡Œé¢æƒ³å¡«å……ä¸œè¥¿æ˜¯ä¼ ä¸åˆ°ç»„ä»¶å®šä¹‰çš„funcçš„ï¼Œåªèƒ½é€šè¿‡props. 

  ```react
  // ç»„ä»¶å®šä¹‰
  function Button = (props)=>{
    return <button>{props.children}</button>
  }
  // ç»„ä»¶çš„å®ä¾‹åŒ– ä½¿ç”¨
  <Button>
    è¿™é‡Œæ–‡å­—å¯ä»¥ç›´æ¥æ¸²æŸ“åœ¨buttonä¸Š
  </Button>
  // ç»„ä»¶å®ä¾‹åŒ– å¦ä¸€ç§æ–¹å¼ä¼ é€’childrenç›´æ¥å½“åšå±æ€§ç”¨,ä½†æ˜¯è¦è‡ªé—­å’Œï¼****
  <Button children={"è¿™é‡Œæ–‡å­—å¯ä»¥ç›´æ¥æ¸²æŸ“åœ¨button"}/>
  
  ```

#### è‡ªå®šä¹‰

- variantï¼š èœå•åˆ—è¡¨çš„çº¢ç‚¹ï¼Œå’Œæ¶ˆæ¯åˆ—è¡¨çš„æœªè¯»æ¶ˆæ¯æ•°ï¼Œæ˜¯åŒä¸€ä¸ªç»„ä»¶çš„**ä¸¤ç§å˜ä½“**
  - ä¸å¸¦æœªè¯»æ•°ä¸ºçº¢ç‚¹ï¼Œå¸¦çš„æ˜¾ç¤ºæ•°å­—ã€‚
  - æœ‰childrenä¼ è¿›æ¥ï¼Œiconå³ä¸Šè§’çš„çº¢ç‚¹ï¼Œå¦åˆ™æ˜¾ç¤ºcountå€¼

#### å‚æ•°

- children 
- count
- show
- showZero  æ¶ˆæ¯ä¸º0æ˜¯å¦æ˜¾ç¤º

#### è¿”å›å€¼

`<Badge></Badge>` æœ‰childrenå†™æ³• ï¼ˆæ— childrenè‡ªé—­å’Œï¼‰

#### æ€»ç»“

- æŠ½ç¦»é»˜è®¤å­—ä½“ï¼Œ è®¾ç½®å…¨å±€htmlçš„font-size: 62.5%, å› æ­¤1rem = 10px  è®¾ç½®story.cssä¸­é»˜è®¤å­—ä½“1.4rem(14px)
- Variantä¸€ä¸ªç»„ä»¶çš„ä¸¤ä¸ªå˜ä½“css
- æŠ½ç¦»åœ†å½¢cssä¸ºå…¬å…±çš„mixin





## NavBarç»„ä»¶ - èœå•

<img src="/Users/wangbo/Library/Application Support/typora-user-images/image-20220901004042440.png" alt="image-20220901004042440" style="zoom:30%;" />

#### å…ˆä¿®çŸ¥è¯†ç‚¹

- éœ€è¦ç”¨<Badge></Badge> åŒ…è£¹Icon

#### å‚æ•°

- icon  
- active æ˜¯å¦æ¿€æ´»
- showBadge æ˜¯å¦æ˜¾ç¤ºçº¢ç‚¹

#### è¿”å›æ ‡ç­¾

`<StyledMenuItem> </StyledMenuItem>` 

#### æ€»ç»“

- æ–°å»º`.storybook/.babelrc` æ–‡ä»¶, ä»¥ä½¿ç”¨"styled-components/macro" æŠŠcssä½œä¸ºå±æ€§
- `utils/mixins.js` é‡Œé¢æ·»åŠ `activeBar(barWidth, shadowWidth)` &::before/after
- **æ¿€æ´»çŠ¶æ€**æ§åˆ¶çš„ä¸¤ç§æ–¹å¼
  - `activeBar()`ä¼ å‚ å¯ä»¥é€šè¿‡ä¼ å…¥`{barWidth:0, shadowWidth:0}`æ§åˆ¶é˜´å½±å®½åº¦
  - æˆ–è€…åªä¿®æ”¹ `&::before,&::after{height: 0}` çš„é«˜åº¦ï¼Œé€‰è¿™ç§æ–¹æ³•å› ä¸ºå¯ä»¥**è®¾ç½®é«˜åº¦åŠ¨ç”»**

## NavBarç»„ä»¶ - ä¾§å¯¼èˆª

<img src="/Users/wangbo/Library/Application Support/typora-user-images/image-20220901154126505.png" alt="image-20220901154126505" style="zoom:30%;" />

#### å¸ƒå±€

- å¤´åƒ1/5 ï¼› MenuItemæ¯ä¸ªæœ‰å›ºå®šé«˜åº¦ï¼Œä¸ªæ•°è‡ªå®šä¹‰ï¼›æœ€ä¸‹é¢çš„**è®¾ç½®**å¡«å……å‰©ä¸‹æ‰€æœ‰é«˜åº¦

- `CSS grid`

#### å‚æ•°

- navSizeï¼šè‡ªå®šä¹‰å®½åº¦ ğŸ”…
- å…¶ä»–çš„ç›´æ¥å†™æ­»åœ¨index.jsé‡Œäº†ï¼Œå¦‚æœéœ€è¦å¢åŠ å›¾æ ‡éœ€è¦ä¿®æ”¹ã€‚

#### è¿”å›æ ‡ç­¾

`<NavBar> </NavBar>` 

```react
<NavBar>
  <Avatar />
  <MenuItems>
    <MenuItem />
    <MenuItem />
  </MenuItems>
  <Settings />
</NavBar>
```

#### æ€»ç»“

- åœ¨style.jsæ–‡ä»¶é‡Œï¼Œä¿®æ”¹ç»„ä»¶å†…ç»„ä»¶çš„æ ·å¼ï¼Œä¸€å®šè¦å¼•ç”¨åˆ°StyledAvatar

  ```react
  // ä¿®æ”¹Avatarç»„ä»¶çš„æ ·å¼ï¼Œä¸€å®šè¦å¼•ç”¨StyledAvatar (åŒ…è£…è¿‡çš„)
  // 
  	${StyledAvatar}{
  		justify-self: center;
  		${StatusIcon}{
  			&::before{
  				background-color: ${({theme})=> theme.darkPurple };
  			}
  		}
  	}
  ```

- gridå¸ƒå±€

  ```js
  display: grid;
  grid-template-rows: 1fr 4fr; // å¤´åƒå 1/5, å‰©ä¸‹4/5 
  grid-template-rows: repeat(5, minmax(auto, 88px)) 1fr;   //å‰äº”ä¸ªåœ¨74-88ä¸­é—´ï¼Œæœ€åä¸€ä¸ªå æ»¡å‰©ä¸‹ç©ºé—´)
  ```



## InputåŸºç¡€ç»„ä»¶

å¯ä½¿ç”¨åœ¨:  æœç´¢æ¡†ï¼Œå‘é€æ¶ˆæ¯æ¡†ã€ã€

#### å‚æ•°

```
- placeholder="è¯·è¾“å…¥..." :
- prefix : 
- suffix : 
```



#### è¿”å›æ ‡ç­¾

`<Input />`  å’Œ  `<Search />`

#### å­ç»„ä»¶Search â­ï¸

Searchä½œä¸º Input çš„å­ç»„ä»¶å¯¼å‡º

```js
Input.Search = Search;   // Searchç»„ä»¶ä½œä¸ºInputçš„å­ç»„ä»¶å¯¼å‡º
```

#### æ€»ç»“

```css
/* ä¼ªå…ƒç´  */
const StyledInput = styled.input`
	height: 40px;
	width: 100%;
	border: none;
	background:none;
	color: ${ ({theme})=> theme.greyInput};
	font-size: ${({theme})=> theme.medium};
	display: block;   //? ä¸ºä»€ä¹ˆè¿™é‡Œ??
	// ä¼ªå…ƒç´ 
	&::placeholder{
		color: ${({theme}) => theme.greyPh};
	}
`;
```

```css
/* ç‚¹å‡»ç±»æ ‡ç­¾ çš„è¾¹æ¡†å»æ‰  index.css	 */ 
input,
button,
select{
  outline: none;
}
```



## Textç»„ä»¶

#### å‚æ•°

```js
{
  type="primary": é¢œè‰²  // "primary","secondary","danger"
	size="normal": å°ºå¯¸   // "normal","medium","small/xsmall/xxsmall","large/..."
	bold:  bool æ˜¯å¦åŠ ç²—
}
```

#### è¿”å›æ ‡ç­¾

`<Text> </Text>`

#### è¸©å‘æŒ‡å—

```react
// "font-weight": 500  è¿™ä¸ªå±æ€§åªå¯¹è‹±æ–‡èµ·ä½œç”¨
<Text size="xxlarge" type="danger" bold={false}>
  Container
</Text>
<Text size="xxlarge" type="danger" bold>
	è‹±æ–‡å¯ä»¥åŠ ç²—ï¼Œä¸­æ–‡ä¸è¡Œorz
</Text>
```



## Paragraphç»„ä»¶

#### å‚æ•°

```js
//å¤ç”¨Textçš„style
{
  ellipsis: bool,   //æ˜¯å¦çœç•¥æ®µå°¾
}
```

#### è¿”å›æ ‡ç­¾

`<Paragraph> </ Paragraph>`

#### æ€»ç»“

- å¤ç”¨Textç»„ä»¶çš„style:  åœ¨style.jsé‡Œå¼•å…¥StyledText, æ ·å¼é‡Œä¸éœ€è¦æ¸²æŸ“æ ‡ç­¾

  ```js
  import StyledText from "components/Text/style"; //å¤ç”¨Textç»„ä»¶ï¼ˆçš„æ ·å¼ï¼‰
  const StyledParagraph = styled(StyledText)`
    ${({ ellipsis }) =>
      ellipsis &&
      css`
        text-overflow: ellipsis;
        overflow: hidden;
        white-space: nowrap;    //è¿™é‡Œæ˜¯ellipsiså†™æ³•
      `}
  `; // é‡Œé¢å†™Paragraphç‹¬æœ‰æ ·å¼
  ```

  

- é¿å…å¤ªå¤š`<div>`åŒ…è£¹ï¼Œä½¿ç”¨`<React.Fragment> `

  ```js
  export const Default = () => {
    return (
      <>
        <Paragraph>æµ‹è¯•æ¢è¡Œ </Paragraph>
        <Paragraph size="large">æµ‹è¯•æ¢è¡Œ(large) </Paragraph>
      </>
  		// ä¹Ÿå¯ä½¿ç”¨<React.Fragment> </React.Fragment>
    );
  };
  ```

## Headerç»„ä»¶

#### å‚æ•°

- Level: 1,2,3,4,5,6



## ä¸‹æ‹‰é€‰é¡¹ç»„ä»¶ - è¿‡æ»¤Select

- Optionç»„ä»¶ä¸èƒ½å•ç‹¬ä½¿ç”¨

#### å‚æ•° 

- æ— 

#### è¿”å›æ ‡ç­¾

`<Select>{Options...}</Select>`

#### æ€»ç»“

- å»æ‰é»˜è®¤selectçš„ä¸‹æ‹‰å›¾æ ‡

  ```js
  //   -moz-appearance, -webkit-appearance  åˆ†åˆ«éšè—firefox/chrome(è¢«reactç»™å°è£…åœ¨appearanceé‡Œ)
  //   -ms-expand éšè—ie
  const StyledSelect = styled.select`
    appearance: none; 
    ::-ms-expand {
      display: none; //ieéšè—
    }
  `
  ```

  

## Buttonç»„ä»¶

- æ‚¬æµ®æŒ‰é’®
- ä¸¤ç§å˜ä½“<img src="/Users/wangbo/Library/Application Support/typora-user-images/image-20220903172752520.png" alt="image-20220903172752520" style="zoom:30%;" />

#### å‚æ•°

```js
{
  type: "primary",   // "primary"  åé¢å¯ä»¥å®šåˆ¶
	shape: "circle",    // circle(é»˜è®¤) / rect 
  size:  "30px" 						// å°ºå¯¸
  bgColor:          //èƒŒæ™¯è‰²
}
```

#### æ€»ç»“

- æŒ‰é’®æ‚¬æµ®å˜å¤§ åŠ¨ç”»

  ```css
  transform: scale(1);
  transition: 0.4s;
  &:hover{
    transform: scale(1.1);
    box-shadow: 0px 6px 16px rgba(0, 0, 0, 0.12);  //é˜´å½±
  }
  ```

  

## Filterç»„ä»¶

<img src="/Users/wangbo/Library/Application Support/typora-user-images/image-20220905145529190.png" alt="image-20220905145529190" style="zoom:50%;" />

#### å‚æ•°

```js
{
  label: "xxx",
}
```



#### å­ç»„ä»¶å¯¼å‡º

```html
<Filter>
	<Filter.Filters label="åˆ—è¡¨æ’åº"> 
    <Text>{label}</Text>
    {children}
  </Filter.Filters>
	<Filter.Action label="æ–°å¢ä¼šè¯">
    <Text>{label}</Text>
    {children}
  </Filter.Action>
</Filter>
```



## MessageCard æ¶ˆæ¯å¡ç‰‡ç»„ä»¶

<img src="/Users/wangbo/Library/Application Support/typora-user-images/image-20220905150538401.png" alt="image-20220905150538401" style="zoom:30%;" />

<img src="/Users/wangbo/Library/Application Support/typora-user-images/image-20220905150633468.png" alt="image-20220905150633468" style="zoom:30%;" />

<img src="/Users/wangbo/Library/Application Support/typora-user-images/image-20220905150731531.png" alt="image-20220905150731531" style="zoom:30%;" />

#### å‚æ•° ğŸ†˜

```json
- avatarSrc,
- avatarStatus,
- statusText,
- name,
- time,
- message,
- unreadCount,
- active: bool
- replied: bool
```



#### Gridå‘½åå¸ƒå±€

è°ƒç”¨card( ) è®¾å®šä¸€ç»„èƒŒæ™¯è‰²å’Œè¾¹æ¡†

```css
const StyledMessageCard = styled.div`
  
  ${card()}
  display: grid;
  grid-template-areas:
    "avatar name time"
    "avatar status status"
    "message message message";
  grid-template-columns: 64px 1fr 1fr; //ç¬¬ä¸€åˆ—64px å‰©ä¸‹å¹³åˆ†
  row-gap: 15px;
  background: ${({ theme }) => theme.background};
  transition: 0.4s;
  ${StyledAvatar} {
      grid-area: avatar;   //å¤´åƒå ä½
  }
`
```

## MessageList æ¶ˆæ¯åˆ—è¡¨

`ç»„è£… Search, Filterï¼ŒMessageCard`

#### å‚æ•°

`æ— `

#### æ ‡ç­¾

` <MessageList />`

#### æ€»ç»“

```react
// ChatListä½œä¸ºåŒ…è£¹MessageCardçš„å®¹å™¨ï¼Œè®¾å®šå¡ç‰‡ä¹‹é—´çš„é—´è·
// style.js
import StyledMessageCard from "components/MessageCard/style";
const ChatList = styled.div`
  ${StyledMessageCard} {
    margin-bottom: 20px; //è®¾ç½®å•ä¸ªcardä¸‹è¾¹è·
  }
`;

//index.js
<ChatList>
  {[1, 2, 3, 4, 5, 6].map((val, idx) => (
    <MessageCard
      key={idx}
      avatarSrc={face2}
      avatarStatus="online"
      name="Cindy"
      statusText="åœ¨çº¿"
      time="ä¸‰å°æ—¶å‰"
      message="å“ˆå“ˆå“ˆå“ˆå“ˆå“ˆå“ˆ"
      unreadCount={2}
      active={idx === 3}
      replied={idx % 3 === 0}
      ></MessageCard>
  ))}
</ChatList>    
```



## TitleBarç»„ä»¶

<img src="/Users/wangbo/Library/Application Support/typora-user-images/image-20220906153703901.png" alt="image-20220906153703901" style="zoom:50%;" />

#### å‚æ•°

```json
- status: "online", "offline"
```

#### æ ‡ç­¾

`<TitleBar />`



## ChatBubble ä¼šè¯æ°”æ³¡ç»„ä»¶

<img src="/Users/wangbo/Library/Application Support/typora-user-images/image-20220906175901489.png" alt="image-20220906175901489" style="zoom:30%;" />

#### å‚æ•°

```json
- type: "mine"  é»˜è®¤æ— 
- time: "ä¸‹åˆ 14:04"
```

#### æ ‡ç­¾

`<ChatBubble> text </ChatBubble>`

```html
<StyledChatBubble type={type} {...rest}>
  <Bubble>
  	<BubbleTip icon={BubbleTipIcon} width={40} height={28} color="white" />
  	<MessageText>{children}</MessageText>
  </Bubble>
  <Time>{time}</Time>
</StyledChatBubble>
```



#### æ€»ç»“

- é»˜è®¤ä¸æ˜¾ç¤ºï¼Œæœ‰type="mine"æ‰æ˜¾ç¤º

  ```js
  ${({ type }) => type && typeVariants[type]};
  ```



## VoiceMessageè¯­éŸ³ç»„ä»¶

<img src="/Users/wangbo/Library/Application Support/typora-user-images/image-20220906180008563.png" alt="image-20220906180008563" style="zoom:20%;" />

#### å‚æ•°

```json
- type: "mine"   é»˜è®¤æ— 
- time: "01:24"  æ—¶é•¿
```

#### æ ‡ç­¾

- ä½œä¸ºChatBubbleçš„å­ç»„ä»¶å­˜åœ¨

  ```react
  <ChatBubble time="æ˜¨å¤© ä¸‹åˆ14:04" type="mine">
  	<VoiceMessage time="02:12" type="mine" />
  </ChatBubble>
  ```

#### æ€»ç»“

- Cssé€‰æ‹©å™¨ é€‰ç¬¬ä¸€ä¸ªchild

  ```css
  const StyledVoiceBubble = styled.div`
    // ç¬¬ä¸€ä¸ªå­©å­ (æœ€å·¦ä¾§çš„Play-icon)
    & > *:first-child {
      flex-shrink: 0;
    }
  
    & > *:not(:first-child) {
      margin-left: 16px;
    }
  `;
  ```

  

## Emojiç»„ä»¶

#### å‚æ•°

```json
- label: "smile"  emojiçš„åå­—
```

#### æ ‡ç­¾

`<Emoji label="clock">â°</Emoji>`





## Popoverç»„ä»¶

<img src="/Users/wangbo/Library/Application Support/typora-user-images/image-20220907120840151.png" alt="image-20220907120840151" style="zoom:30%;" />

- **åªæ˜¯ä¸€ä¸ªå¼¹å‡ºå±‚ ï¼ˆç±»ä¼¼ChatBubble åœ¨æ‰€æœ‰å±‚ä¹‹ä¸Šï¼‰**

#### å‚æ•°

```
- content: any å¯ä»¥æ˜¯ä»»ä½•
- offset: åç§»
```

#### æ ‡ç­¾

```react
<Popover content="hello" >
  {children}
</Popover>
```



#### æ€»ç»“

- StyledPopoverä½¿ç”¨relativeå®šä½ï¼Œé‡Œé¢çš„ä¸œè¥¿ä½¿ç”¨absoluteå®šä½

- æŠŠè¦è¢«é™„åŠ çš„ç»„ä»¶æ”¾åœ¨`{children}`é‡Œ

  ```react
  <Popover ....>
    <Button>è¢«é™„åŠ çš„æŒ‰é’®</Button>
  </Popover>
  ```

- ä¸‰è§’å½¢å¥—è·¯

  <img src="/Users/wangbo/Library/Application Support/typora-user-images/image-20220907141849301.png" alt="image-20220907141849301" style="zoom:30%;justify-self:left" />

  ```react
  //ä¸‰è§’å½¢å¥—è·¯
  const Triangle = styled.div`
    position: absolute;
    height: 0;
    width: 0;
    border-style: solid;
    border-width: 6px 6px 0 6px;
    border-color: ${({ theme }) => theme.background} transparent transparent
      transparent;
    left: calc(50% - 6px);
    bottom: calc(100% + 12px - 6px);
  `;
  ```

- `visible`çš„toggle  (useState)

  ```js
  function Popover({ children, content, offset, onHide, onVisible, ...rest }) {
    const [visible, setVisible] = useState(false); //é»˜è®¤ä¸æ˜¾ç¤º
    const handleClick = () => {
  		if (visible){
  			setVisible(false);
  			onHide && onHide(); //æœ‰å‡½æ•°çš„è¯ï¼Œè°ƒç”¨å³å¯
  		}
  		if (!visible){
  			setVisible(true);
  			onVisible && onVisible(); //æœ‰å‡½æ•°çš„è¯ï¼Œè°ƒç”¨å³å¯
  		}
    };
    
    return (...)
  }
  ```



## Footerç»„ä»¶ï¼ˆç»„ï¼‰

<img src="/Users/wangbo/Library/Application Support/typora-user-images/image-20220907152709603.png" alt="image-20220907152709603" style="zoom:40%;" />

#### å‚æ•°

`æ— `

#### æ ‡ç­¾

`<Footer />`

```react
<StyledFooter {...rest}>
      <Input
        placeholder="æƒ³è¯´çš„è¯..."
        prefix={<Icon icon={ClipIcon} />}
        suffix={
          <IconContainer>
            <Popover
              content={<PopoverContent />}
              offset={{ x: "-25%" }}
              onVisible={() => setEmojiIconActive(true)}
              onHide={() => setEmojiIconActive(false)}
            >
              <Icon
                icon={SmileIcon}
                color={emojiIconActive ? undefined : theme.grey}
              />
            </Popover>

            <Icon icon={MicrophoneIcon} />
            <Button size="52px">
              <Icon icon={PlaneIcon} color="white" />
            </Button>
          </IconContainer>
        }
      />
    </StyledFooter>
```

#### æ€»ç»“

- ç¬¦åˆhtmlè¯­ä¹‰åŒ–è§„åˆ™ `const StyledFooter = styled.footer``;  //ç¬¦åˆhtmlè¯­ä¹‰åŒ–è§„åˆ™`

- `useState()` æ§åˆ¶SmileIconçš„çŠ¶æ€ï¼Œæ˜¯å¦ä¸ºç°è‰²

  ```react
  // æ— popoveræ—¶å€™ï¼Œsmileä¸ºç°è‰² - é€šè¿‡onVisibleå’ŒonHideè®¾ç½®å›è°ƒ
  const [emojiIconActive, setEmojiIconActive] = useState(false);
  
  <Popover
  	content={<PopoverContent />}
  	offset={{ x: "-25%" }}
  	onVisible={() => setEmojiIconActive(true)}
  	onHide={() => setEmojiIconActive(false)}    //ä¸ºonHideè®¾ç½®å›è°ƒï¼Œæ”¹å˜emojiIconçŠ¶æ€
  >
    <Icon icon={SmileIcon} color={emojiIconActive ? undefined : theme.grey} />  //æ”¹Smileé¢œè‰²
  </Popover>
  ```



## Conversation ä¼šè¯çª—å£ç»„ä»¶ï¼ˆç»„ï¼‰

#### å‚æ•°

`æ— `

#### æ€»ç»“

- ä¸€äº›æ ·å¼

```css
/* æ”¹å®¹å™¨ä¸‹æœ€åä¸€ä¸ªå­©å­*/
& > *:last-child {
    align-self: end;
}

/* flex  */
const Conversations = styled.div`
  display: flex;
  flex-direction: column;
  align-items: start;    /*å‚ç›´æ–¹å‘ ä¸Šé */

  padding: 10px 15px;
  width: 100%;
  flex: 1;          /* å®¹å™¨ä¸ºæµ®åŠ¨é«˜åº¦ï¼ˆé«˜åº¦ä¸å›ºå®šï¼Œä¼šæ’‘æ»¡çˆ¶çº§å‰©ä¸‹çš„æ‰€æœ‰ä½ç½®ï¼‰*/  
`;
```

## 

## ä¸ªäººèµ„æ–™ç»„ä»¶

<img src="/Users/wangbo/Library/Application Support/typora-user-images/image-20220908111307172.png" alt="image-20220908111307172" style="zoom: 33%;" />

- **Gridå¸ƒå±€**ã€align-items å’Œalign-content åŒºåˆ«ã€‘https://blog.csdn.net/ks795820/article/details/125530818

### å¤´åƒ+ä¸ªäººä¿¡æ¯

<img src="/Users/wangbo/Library/Application Support/typora-user-images/image-20220908122559937.png" alt="image-20220908122559937" style="zoom:33%;" />

### ç¤¾äº¤ä¿¡æ¯

<img src="/Users/wangbo/Library/Application Support/typora-user-images/image-20220908145943134.png" alt="image-20220908145943134" style="zoom:50%;" />

- å•ç‹¬æä¸ªç»„ä»¶`<Icon.Social/>`

  ```react
  <SocialLinks>
    <Icon.Social
      icon={faWeibo}
      bgColor="#F06767"
      href="http://www.weibo.com"
    />
    <Icon.Social icon={faGithub} bgColor="black" />
    <Icon.Social icon={faWeibo} bgColor="#2483C0" /></SocialLinks>
  ```

- `window.open(url, "_blank")`  ç¬¬äºŒä¸ªå‚æ•°è¡¨ç¤ºåœ¨æ–°çš„`_blank`è¿˜æ˜¯å½“å‰ `_self`çª—å£æ‰“å¼€urlé“¾æ¥

### è”ç³»ä¿¡æ¯

```react
<ContactSection>
  <Description label="è”ç³»ç”µè¯"> +86 13048063227</Description>
  <Description label="ç”µå­é‚®ä»¶"> cindy@gmail.com</Description>
  <Description label="ä¸ªäººç½‘ç«™"> www.cindy.com</Description>
</ContactSection>

const ContactSection = styled.section`
  display: grid;
  row-gap: 18px;
`;
```



### ç›¸å†Œ

```css
const Photo = styled.img`
  width: 76px;
  height: 76px;
  object-fit: cover;    /*è‡ªåŠ¨ç¼©æ”¾*/
`;
```



## Seperator åˆ†å‰²çº¿ç»„ä»¶

åˆ†å‰²çº¿æ¨¡æ¿ä»£ç 

```css
div{
	width: 100%;
  height: 1px;
  border-bottom: 1px solid color;
}
```



## ğŸ”…ğŸ”…ğŸ”… è®¾ç½®é¡µé¢ ğŸ”…ğŸ”…ğŸ”…



## InputTextç»„ä»¶

#### å‚æ•°

```js
- label: "" å¯æœ‰å¯æ— 
```

#### è¾“å‡ºæ ‡ç­¾

```react
<Input.Text label />
```



#### LabelContainerç»„ä»¶

```react
// è¿™é‡Œçš„childrenå¯ä»¥æ˜¯<input/> æˆ–è€…åˆ«çš„ä»€ä¹ˆcheckbox
function LabelContainer({ children, label, ...rest }) {
  return (
    <StyledLabelContainer {...rest}>
      {label && <Text style={{ marginBottom: "8px" }}>{label}: </Text>}
      {children}
    </StyledLabelContainer>
  );
}
```

#### InputUnderlineæ ·å¼ç»„ä»¶

å°±æ˜¯ä¸€ä¸ªæ ·å¼åŒ…è£¹çš„<input/>

```css
const InputUnderline = styled.input`
  border: none;   /*å»æ‰è¾¹æ¡†å¹¶ åªåŠ ä¸‹è¾¹æ¡†*/
  border-bottom: 1px solid ${({ theme }) => theme.greyBox};
  font-size: ${({ theme }) => theme.normal};
  width: 100%;
  background: none;   /*èƒŒæ™¯è‰²ç½®ç©º*/
 
  & > ::placeholder {
    color: ${({ theme }) => theme.grey5};
  }

  /*focusæ—¶æ”¹å˜ä¸‹è¾¹æ¡†é¢œè‰²*/
  :hover,
  :focus {
    border-bottom-color: ${({ theme }) => theme.primaryColor};
  }
`;
```



## Select è¡¨å•ç»„ä»¶

<img src="/Users/wangbo/Library/Application Support/typora-user-images/image-20220909103805034.png" alt="image-20220909103805034" style="zoom:50%;" />

é‡æ„Selectç»„ä»¶

#### å‚æ•°

```react
- label: "è‡ªå®šä¹‰label"
- type: "form" //æš‚æ—¶åªæœ‰ä¸€ä¸ªform
```



## Radioå•é€‰æŒ‰é’®ç»„ä»¶

#### å‚æ•°

```js
- name: "sex"
```

#### è¿”å›æ ‡ç­¾

```react
<Radio name="sex" >å¥³</Radio>
```

#### å­ç»„ä»¶Radio.Group

```react
<Radio.Group label="è¯·é€‰æ‹©åŸå¸‚" >
  <Radio name="city">å¹¿å·</Radio>
  <Radio name="city">æ·±åœ³</Radio>
</Radio.Group>
```

#### æ ·å¼

- ä¼ªç±»è¦†ç›–åŸæ¥çš„æ ·å¼ï¼Œè¿‡æ¸¡`scale()`

  ```css
  /* ä¸€ç»„Radioçš„å®¹å™¨ */ 
  const StyledRadioGroup = styled.div`
    display: flex;
    /* é™¤äº†ç¬¬ä¸€ä¸ªå­©å­ï¼Œåé¢çš„å·¦è¾¹è· */ 
    & > *:not(:first-child) {
      margin-left: 24px;
    }
  `;
  
  /* å®Œå…¨éšè—è‡ªå¸¦çš„é€‰ä¸­åœˆ */
  const RadioButton = styled.input.attrs({ type: "radio" })`
    width: 0;
    height: 0;
    opacity: 0;
    /*é€‰ä¸­çŠ¶æ€ï¼Œå¯¹é‚»å±…<Circle/>çš„::afteråšæ›´æ”¹ */
    &:checked + ${Circle}::after {
      opacity: 1;
      transform: scale(1);
    }
  	/* ï¼ˆéé€‰ä¸­åŒç†ï¼‰ */
    &:not(:checked) + ${Circle}::after {
      opacity: 0;
      transform: scale(0);
    }
  `;
  ```

### 

## Switch æ»‘åŠ¨æŒ‰é’®ç»„ä»¶ğŸ¥³

å‚æ•°

`æ— `

æ ‡ç­¾

```html
<StyledSwitch></StyledSwitch> æ¸²æŸ“ä¸º<label></label>

```

#### æ€»ç»“

- ä¼ªå…ƒç´  `::before, ::after`

  ```css
  div::before, div::after{
    content: "";   //å¿…é¡»æœ‰
    display:      // ä¸è®¾ç½®çš„è¯ï¼Œé»˜è®¤ä¸ºinline
  }
  ```

- Checkboxä¸ºå®é™…æ§åˆ¶ï¼ŒSliderä¸ºæ ·å¼æ»‘åŠ¨æ§½

  ```css
  /*ä¼ªç±»checkedè¢«é€‰ä¸­çš„æ—¶å€™ï¼Œè®¾ç½®é‚»å±…Sliderçš„æ ·å¼ ï¼ˆèƒŒæ™¯è‰²æ”¹å˜ï¼Œ::beforeä½ç§»å³ç§»20px)*/
    &:checked + ${Slider} {
      background-color: ${({ theme }) => theme.green2};
      // åŸå‹å³ç§»
      &::before {
        transform: translateX(20px);
      }
    }
  ```

  

## EditProfile ä¸ªäººèµ„æ–™ç¼–è¾‘

#### é‡æ„Profileç»„ä»¶

- å…ˆç»™Profileç»„ä»¶æ–°å¢å‡ ä¸ªå±æ€§ï¼š 

  ```js
  - showEditBtn:    bool æ˜¯å¦æ˜¾ç¤ºç¼–è¾‘æŒ‰é’®
  - showCloseIcon = true    é»˜è®¤true, æ˜¯å¦æ˜¾ç¤ºå…³é—­æŒ‰é’®
  - onEdit:   func ç¼–è¾‘çŠ¶æ€å›è°ƒ
  - status:   "online","offline"
  ```

- ä¸¤ä¸ªçŠ¶æ€ï¼š

  - é»˜è®¤ 

    ```js
    showEditBtn = true
    showCloseIcon = false
    ```

  - ç¼–è¾‘

    ```js
    showEditBtn = false
    showCloseIcon = true
    ```

#### UseState hook

- ç®¡ç† isEditçŠ¶æ€

  ```react
  const [isEdit, setIsEdit] = useState(false);  //é»˜è®¤éç¼–è¾‘çŠ¶æ€
  
  // æ ¹æ®isEditçŠ¶æ€é€‰æ‹©è¿”å›å€¼ ä¸ºfalse,ç›´æ¥è¿”å›<Profile/>, 
  // å¦åˆ™è¿”å›<StyledEditProfile> {Children} </<StyledEditProfile>   --æœªå®Œ
  if (!isEdit){
      return (
        <Profile
          showEditBtn
          showCloseIcon={false}
          onEdit={() => setIsEdit(true)}
        />
      ); 
  } else{
    return <StyledEditProfile {...rest}>{children}</StyledEditProfile>;
  }
    
  ```

#### ä¸ªäººèµ„æ–™ç¼–è¾‘ç»„ä»¶

 

## è®¾ç½®é¡¹ç»„ä»¶

<img src="/Users/wangbo/Library/Application Support/typora-user-images/image-20220911164457431.png" alt="image-20220911164457431" style="zoom:40%;" />

### SettingsItemç»„ä»¶

æ¯ä¸€è¡Œçš„é€‰é¡¹Item

#### å‚æ•°

```js
 - type = "switch", "menu"
 - label:    string
 - description:   string
 - {children}
```

#### æ ·å¼

```css
// å¸ƒå±€æ ·å¼ç”¨
const StyledSettingsItem = styled.div``;

// æ¯ä¸€ä¸ªItemçš„å®¹å™¨
const SettingsItemControl = styled.div`
  display: flex;
  justify-content: space-between;
`;
```

### Settingsç»„ä»¶

æ•´ä¸ªå®¹å™¨ï¼Œåˆ†ä¸¤éƒ¨åˆ†

- éšç§è®¾ç½® 
- é€šçŸ¥è®¾ç½®



## BlockedList å±è”½åˆ—è¡¨

<img src="/Users/wangbo/Library/Application Support/typora-user-images/image-20220913111952360.png" alt="image-20220913111952360" style="zoom:30%;" />

#### å‚æ•°

`æ— `

#### è¿”å›æ ‡ç­¾

```react
<BlockedList/>
```

#### æ€»ç»“

- Gridå¸ƒå±€åŒæ—¶å¯ä»¥åšï¼šè§„æ•´çš„å¸ƒå±€ï¼Œå’Œä¸è§„æ•´å¸ƒå±€

  ```css
  /*è§„æ•´ åˆ—è¡¨*/
  const FriendList = styled.div`
    display: grid;
    grid-template-columns: repeat(5, 1fr);
    row-gap: 24px;
    /* justify-content: center; */ //è¿™ä¸ªæ— ç”¨
    justify-items: center;
  `;
  
  /* ä¸è§„æ•´çš„ æ ‡é¢˜*/
  const SettingsMenu = styled.div`
    height: 148px;
    display: grid;
    grid-template-columns: 10px 1fr;
    align-items: center;
  
    ${StyledText} {
      /* grid-column: span 1/-1; //è®©åœ¨æ•´ä¸ªå±å¹•å±…ä¸­ */
      justify-self: center;
    }
  `;
  ```

  

## FilterList æŠ½ç¦»è¿‡æ»¤åˆ—è¡¨

<img src="/Users/wangbo/Library/Application Support/typora-user-images/image-20220913141623257.png" alt="image-20220913141623257" style="zoom:30%;" />

å‡ ä¸ªçš„åŒºåˆ«

- è¿‡æ»¤é€‰é¡¹ <img src="/Users/wangbo/Library/Application Support/typora-user-images/image-20220913141515310.png" alt="image-20220913141515310" style="zoom:40%;" />
- åŠ¨ä½œæŒ‰é’®æ˜¯å¦å­˜åœ¨ <img src="/Users/wangbo/Library/Application Support/typora-user-images/image-20220913141452743.png" alt="image-20220913141452743" style="zoom:40%;" />
- å±•ç¤ºçš„åˆ—è¡¨å†…å®¹ 

#### å‚æ•°

```js
- options:     list[ ]   è¿‡æ»¤é€‰é¡¹çš„å€¼
- optionLabel: "string"  è¿‡æ»¤é€‰é¡¹label
- actionLabel: "string"  åŠ¨ä½œæŒ‰é’®label (æ²¡ä¼ å°±ä¸æ˜¾ç¤º)
```



## ContactList è”ç³»äººåˆ—è¡¨

<img src="/Users/wangbo/Library/Application Support/typora-user-images/image-20220913153908989.png" alt="image-20220913153908989" style="zoom:33%;" />

#### ContactCardç»„ä»¶

- æ ·å¼

```css
const StyledContactCard = styled.div`
  ${card()}   /* cardçš„mixin */
  display: grid;
  grid-template-areas:
    "avatar name"
    "avatar intro";
  grid-template-columns: 64px 1fr;
  /*æ”¾å¤´åƒçš„ä½ç½®*/ 
  ${StyledAvatar} {
    grid-area: avatar;
  }
`;
```

- è¿”å›æ ‡ç­¾

```react
<ContactCard
    avatarSrc={face}
    status="online"
    name="Tom"
    intro="this is the introduction"
/>
```

#### ContactList ç»„ä»¶

##### è¿”å›æ ‡ç­¾

`<ContactList />`

##### æ ·å¼

```react
<FilterList
        options={["æœ€æ–°æ·»åŠ ", "å§“åæ’åº"]}
        optionLabel="åˆ—è¡¨æ’åº"
        actionLabel="æ·»åŠ å¥½å‹"
      >
        <Contacts>
          {new Array(10).fill(0).map((val, id) => (
            <ContactCard
              key={id}
              avatarSrc={face}
              status="online"
              name={`name${id}`}
              intro="this is the introduction"
            />
          ))}
        </Contacts>
      </FilterList>
```



## FileList æ–‡ä»¶åˆ—è¡¨

### FileCard ç»„ä»¶

<img src="/Users/wangbo/Library/Application Support/typora-user-images/image-20220913171619904.png" alt="image-20220913171619904" style="zoom:50%;" />

- å‚æ•°

  ```js
   - icon, 
   - name, 
   - size, 
   - time
  ```

### FileListç»„ä»¶

##### å‚æ•°

```js
- options ['',''...]
- optionLabel="åˆ—è¡¨æ’åº"
- actionLabel="æ·»åŠ æ–‡ä»¶"
```

##### è¿”å›æ ‡ç­¾

`<FileList />`



## NoteList ç¬”è®°åˆ—è¡¨ç»„ä»¶

### NoteCard ç»„ä»¶

<img src="/Users/wangbo/Library/Application Support/typora-user-images/image-20220913183855406.png" alt="image-20220913183855406" style="zoom:30%;" />

#### å‚æ•° 

```
imgSrc, 
name, 
abs, 
time
```



##### æ ·å¼

```css
/* å›¾ç‰‡ç¼©æ”¾ */
const NoteImage = styled.img`
  grid-area: img;
	width: 60px;
	height: 60px;
	object-fit: cover;  
`;
/* æ‘˜è¦ è¶…é•¿éƒ¨åˆ†çœç•¥ */
const NoteAbstract = styled(Paragraph).attrs({ size: "small", ellipsis: true })`
  grid-area: abs;
  align-self: center;
`;
```

### NoteList ç»„ä»¶

#### è¿”å›æ ‡ç­¾

`<NoteList />`



## VideoCall è§†é¢‘é€šè¯ç»„ä»¶

<img src="/Users/wangbo/Library/Application Support/typora-user-images/image-20220914132251790.png" alt="image-20220914132251790" style="zoom:20%;" />

<img src="/Users/wangbo/Library/Application Support/typora-user-images/image-20220914132335668.png" alt="image-20220914132335668" style="zoom:30%;" />

#### å‚æ•°

`æ— `

#### æ€»ç»“

- ç‚¹å‡»æŒ‰é’®Minimiseå’Œè¿”å›æŒ‰é’®ï¼Œåˆ‡æ¢ä¸¤ç§çŠ¶æ€ï¼Œä½¿ç”¨useState(true)
- Grid-areaä½¿ç”¨åœ°æ–¹ï¼š 1. style.js  2. Index.js / css={` `}
- Grid-area ä½¿ç”¨åå­—å’Œæ•°å­—ï¼Œç­‰ä»·

#### æ ·å¼

- æœ€å°åŒ–çš„ç•Œé¢ï¼Œå› ä¸ºåªæœ‰å¤–å±‚ä¸€ä¸ªå®¹å™¨ï¼Œé‡Œé¢çš„grid-area å¦‚æœåœ¨styleé‡Œæ”¹ï¼Œä¼šå‡ºç°æœ‰çš„æ ‡ç­¾é‡å¤å‡ºç°ï¼ˆParagraph), å› æ­¤ä½¿ç”¨css/macro

```css
/* æœ€å°åŒ–åçš„ç•Œé¢*/
const VideoCallAlert = styled.div`
  width: max-content;  
  display: grid;
  align-content: center;
  grid-template-areas:
    "av name    name"
    "av action  icon";
  row-gap: 5px;
  column-gap: 10px;
  position: absolute;
  right: 0;
  top: 10vh;
  border: 1px solid ${({ theme }) => theme.greyBox};
  z-index: 200;  /* ä¸ºä½¿å¾—æ‚¬æµ®åœ¨æœ€ä¸Šå±‚ */
  ${card()}      
  /* ${StyledAvatar} {
    grid-area: av;     // è¿™é‡Œä¸å¥½å–Paragraphçš„ï¼Œä½†æ˜¯Avataråªå‡ºç°ä¸€æ¬¡æ‰€ä»¥ok
  } */
`;
```

- èƒŒæ™¯å›¾ç‰‡src ä½œä¸ºå±æ€§ä¼ è¿›å» å¹¶ä¸”fitå’Œå±…ä¸­

  ```css
  background-image: url(${({ src }) => src});  //å±…ä¸­æ˜¾ç¤ºèƒŒæ™¯å›¾
  background-position: center;
  background-size: cover;
  ```

- grid-area çš„åå­—å†™æ³•

  ```css
  grid-area: actions/title;  /* actionsæ‰€åœ¨è¡Œå· å’Œtitleæ‰€åœ¨åˆ—å· */
  grid-area: 2/1/3/3      /*ç­‰ä»·*/
  ```

  

## Dropdownç»„ä»¶

<img src="/Users/wangbo/Library/Application Support/typora-user-images/image-20220914135638370.png" alt="image-20220914135638370" style="zoom:30%;" />

#### å‚æ•° (ç±»popover)

```js
- align: "right(é»˜è®¤)", "top","bottom",... åç§»æ–¹å‘
- content: any
- {children} : è¦é™„åŠ çš„ä¸»
```

#### è¿”å›æ ‡ç­¾

```react
<Dropdown>{children}</Dropdown>
```

#### æ€»ç»“

-  æ–‡å­—ä¸æ¢è¡Œ ï¼š`white-space: nowrap; `

- ç»™æœ€å¤–å±‚çš„SyledDropdownç»‘å®šç›‘å¬äº‹ä»¶ï¼Œvisibleå±æ€§ä¼ ç»™Container

  ```react
  function Dropdown({ content, align = "right", children, ...rest }) {
    const [visible, setVisible] = useState(true);   // é»˜è®¤æ˜¾ç¤º
    return (
      <StyledDropdown onClick={() => setVisible(!visible)} {...rest}>
        {children}
        {content && (
          <DropdownContainer visible={visible} align={align}>
            {content}
          </DropdownContainer>
        )}
      </StyledDropdown>
    );
  }
  ```

  

## ChatApp æœ€ç»ˆç»„ä»¶

<img src="/Users/wangbo/Library/Application Support/typora-user-images/image-20220914163153286.png" alt="image-20220914163153286" style="zoom:30%;" />





----

# ReactRouter

```js
// å®‰è£… react-router-dom æ ¸å¿ƒåº“
npm install react-router-dom åŸºç¡€ä½¿ç”¨åœºæ™¯
```

#### åŸºç¡€ä½¿ç”¨ 

exactä¸ºç²¾ç¡®åŒ¹é…ï¼Œ å½“æœ‰äºŒçº§è·¯ç”±æ—¶ä¸èƒ½ä½¿ç”¨

```react
<Route exact path="/">
  <MessageList />
</Route>
<Route exact path="/contacts">
  <ContactList />
</Route>
<Route path="/settings">
  <EditProfile />      {/* è¿™é‡Œä¸æ˜¯ç²¾ç¡®åŒ¹é…ï¼Œå› ä¸ºæœ‰äºŒçº§è·¯ç”± */}
</Route>

// æ·»åŠ toå±æ€§ï¼ŒæŠŠaæ ‡ç­¾æ”¹æˆLink(æœ€åè¿˜æ˜¯æ¸²æŸ“æˆa, æ·»åŠ äº†è·¯ç”±åŠŸèƒ½ï¼Œto={ })
function MenuItem({ to, icon, active, showBadge, ...rest }) {
  return (
    <StyledMenuItem active={active} {...rest}>
      {/* eslint-disable-next-line  */}
      <Link to={to}>
        <Badge show={showBadge}>
          <MenuIcon icon={icon} active={active} {...rest} />
        </Badge>
      </Link>
    </StyledMenuItem>
  );
}
```

#### Switch / Routes

ä¸ºäº†é¿å…åŒ¹é…ä¸Šçš„éƒ½ä¼šæ˜¾ç¤ºï¼Œä¾‹å¦‚`/`, `/settings` ä¼šåŒæ—¶æ˜¾ç¤º

```jsx
// v5
<Switch>
  <Route exact path="/">
  	<MessageList />
  </Route>
  <Route exact path="/contacts">
    <ContactList />
  </Route>
</Switch>
// v6 æ¢æˆRoutesæ ‡ç­¾
```

#### åŒæ„Ÿå¹å·è½¬bool

```js
// v5ç‰ˆæœ¬  matchPath()è¿”å›ä¸€ä¸ªmatchåˆ°çš„å¯¹è±¡ åŒï¼è½¬å¸ƒå°”
const active = !!matchPath(loc.pathname, {
  path: to,
  exact: true,
  strict: true,    
})

// v6å‚æ•°äº’æ¢ï¼Œexactè½¬ä¸º end
const activeV6 = !!match({
  path: to,
  end: true,
}, loc.pathname)
```

#### Link ç»„ä»¶

`Link ç»„ä»¶æœ€ç»ˆä¼šæ¸²æŸ“ä¸º HTML æ ‡ç­¾ <a>` å®ƒçš„`{to, query, hash}` å±æ€§ä¼šè¢«ç»„åˆä¸€èµ·æ¸²æŸ“æˆ`href`å±æ€§ã€‚ è™½ç„¶`Link`è¢«æ¸²æŸ“æˆè¶…æ‹¦æˆªï¼Œä½†åœ¨å†…éƒ¨å®ç°ä½¿ç”¨è„šæœ¬æ‹¦æˆªäº†æµè§ˆå™¨çš„é»˜è®¤è¡Œä¸ºï¼Œç„¶åè°ƒç”¨`history.pushState()`

### å¯¼èˆªè·¯ç”±



ï¼Ÿä¸ºä»€ä¹ˆhoveræœ‰æ•ˆæœä½†ç‚¹å‡»æ— æ•ˆ





### å†…å®¹åŒºè·¯ç”±

- ä½¿ç”¨`/settings/* `æ›¿ä»£`/settings `å¯ä»¥ä½¿å¾—`settings/blocked`ä¹ŸåŒ¹é…ä¸Šï¼Œè¿™æ ·å±è”½å¥½å‹åˆ—è¡¨çš„é¡µé¢æ˜¾ç¤ºæ—¶ï¼Œå·¦è¾¹çš„`sideBar`è¿˜æ˜¯ä¼šæ˜¾ç¤º`EditProfile`ç»„ä»¶

```jsx
<SideBar>
  <Routes>
    <Route path="/settings/*" element={<EditProfile />} />
		<Route path="/settings" element={<EditProfile />} />     /*åŸæ¥çš„å†™æ³•*/
  </Routes>
</SideBar>

```

- BlockedListç»„ä»¶é‡Œçš„è¿”å›æŒ‰é’®æ·»åŠ ç›‘å¬ï¼Œ

  ```js
  import { useNavigate } from "react-router-dom"; //ä»£æ›¿useHistory
  function BlockedList({ ...rest }) {
    // ç¼–ç¨‹å¼æ§åˆ¶è·¯ç”±
    const navigate = useNavigate(); //
    return (
      <StyledBlockedList {...rest}>
        <SettingsMenu>
          <Icon
            icon={ArrowLeft}
            css={`
              cursor: pointer;
            `}
            onClick={() => navigate(-1)}  // å›é€€
          />
    
  ```

- æŠ½å±‰æ»‘å‡ºï¼Œå…³é—­

  ```react
  // åœ¨chatAppæœ€å¤–å±‚ç»„ä»¶å­˜æ”¾çŠ¶æ€
  const [showDrawer, setShowDrawer] = useState(false);
  
  /* ç»™Draweræ·»åŠ ä¸€ä¸ªshowå±æ€§ showDrawerä¼ è¿›å» æ§åˆ¶æ ·å¼çš„width */
  <Drawer show={showDrawer}>
    <Profile onCloseClick={() => setShowDrawer(false)} />
  </Drawer>
  
  // ğŸ¬ æŠ½å±‰æ»‘å‡º
  // ç‚¹å‡»Conversationé‡Œçš„å¤´åƒæ»‘å‡ºæŠ½å±‰ï¼Œç»™Conversationä¼ é€’ä¸€ä¸ªå±æ€§onAvatarClick={()=>}, ç»§ç»­ä¼ ç»™TitleBar, æœ€åä¼ ç»™Avatarä½œä¸ºonClickçš„å›è°ƒ.
  <Route path="/*" 
    element={<Conversation onAvatarClick={() => setShowDrawer(true)} />}
  />
  <TitleBar onAvatarClick={onAvatarClick} />
  <Avatar onClick={onAvatarClick} src={face} status={status} />
  
  
  // ğŸ¬ æŠ½å±‰å…³é—­
  // Profileæ·»åŠ ä¸€ä¸ªå±æ€§onCloseClick={()=>}, ä¼ ç»™CloseIconçš„å±æ€§ä½œä¸ºonClickçš„å›è°ƒ.
  <Profile onCloseClick={() => setShowDrawer(false)} />
  <CloseIcon icon={Cross} onClick={onCloseClick} />
  ```

  

### è§†é¢‘é€šè¯

ç‚¹å‡»æŒ‚æ–­Iconä¼šè°ƒç”¨ `setShowVideo(false)`

ç‚¹å‡»TitleBaré‡Œçš„VideoIconä¼š è°ƒç”¨ `setShowVideo(true)`

### Bonus ğŸ¥‘

- å®ç°FriendListçš„CloseIcon

  - ```js
    const newArray = Array.filter((val,idx,array)=>{ })  //Array.filter
    ```

    ```react
      // æ§åˆ¶FriendListçš„çŠ¶æ€æ•°ç»„ (åˆå§‹8ä¸ª)
      const initFriends = [];
      for (let i = 0; i < 8; i++) {
        initFriends.push({
          id: i,
          name: `å¥½å‹${i}`,
        });
      }
      const [friends, setFriends] = useState(initFriends); //ä¸èƒ½ç”¨idxä½œä¸ºkey
      // åˆ é™¤å‡½æ•°ï¼Œåˆ æ‰ç¬¬idxé¡¹
      const onHandleDelete = (idx) => {
        setFriends(friends.filter((val, i) => val.id !== idx));
      };
    
    <FriendList>
      {friends.map((friend) => (
        <ClosableAvatar
          key={friend.id}
          onClick={() => onHandleDelete(friend.id)}
          >
          <BlockedAvatar src={face} size="105px" />
          <CloseIcon width={46} height={51} icon={CloseCircle} />
          <BlockedName>{friend.name}</BlockedName>
        </ClosableAvatar>
      ))}
    </FriendList>
    ```

    

# ReactSpring åŠ¨ç”»

<img src="/Users/wangbo/Library/Application Support/typora-user-images/image-20220916172337704.png" alt="image-20220916172337704" style="zoom:50%;" />

### Staggered Animation

- å¯¼å…¥

  ```js
  // è®¾ç½®springåŠ¨ç”» useTrail è¿™ä¸ªhook
  import { useTrail, animated } from "react-spring";
  ```

- é…ç½®åŠ¨ç”»

  ```js
  //è¿™é‡Œä½¿ç”¨hookæ¥é…ç½®åŠ¨ç”», è¿”å›æ•°ç»„
  const trailAnimes = useTrail(6, {
      transform: "translate3d(0px,0px,0px)",
      from: {
        transform: "translate3d(-50px, 0px,0px)",
      },
      config: {
        mess: 0.8,
        tension: 280,
        friction: 20,
      },
      delay: 200,
    });
  ```

- åœ¨å¤–é¢åŒ…è£¹åŠ¨ç”»

  ```react
  {[1, 2, 3, 4, 5, 6].map((val, idx) => (
    <animated.div key={idx}  style={trailAnimes[idx]}>
      <MessageCard
        key={idx}
        avatarSrc={face1}
        ...
        />
    </animated.div>
  ))}
  ```

### æ–°ç‰ˆ Spring-v9 

- ä¸éœ€è¦æ ¹æ®è·¯å¾„åç”Ÿæˆå”¯ä¸€çš„key, è·Ÿç»„ä»¶ç»“åˆä¼šè‡ªåŠ¨ç”Ÿæˆkey

- `useTransition(location, {})` ä¸éœ€è¦ç¬¬äºŒä¸ªå‚æ•°ï¼ˆåŸä¸ºkey)
